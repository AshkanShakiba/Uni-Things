#include <time.h>
#include <stdio.h>
#include <pthread.h>

#define SIZE 1000

int a[SIZE] = {276, 5868, 7404, 975, 962, 1004, 8070, 9529, 278, 2434, 866, 5676, 3066, 1089, 2548, 9185, 6199, 7972,
               4979, 5686, 4837, 258, 7317, 5986, 9382, 6208, 3416, 3419, 7618, 5835, 3653, 9271, 9393, 5360, 1313,
               7961, 9483, 5047, 4345, 4784, 1308, 6162, 3887, 5764, 7573, 5416, 6271, 7259, 9410, 6590, 8527, 2968,
               1378, 3235, 2649, 3416, 4972, 1112, 1347, 2717, 8849, 2174, 5443, 8235, 1626, 3711, 5758, 6351, 8483,
               2495, 31, 6125, 8916, 7086, 4728, 4983, 8065, 6325, 8749, 9369, 8054, 8096, 431, 868, 9326, 7331, 1670,
               7201, 5199, 8479, 1840, 3203, 9538, 3677, 8425, 6947, 1476, 9220, 3604, 3212, 5598, 3071, 4441, 7159,
               9931, 5826, 6971, 724, 7970, 8526, 1147, 4292, 7096, 5218, 2442, 4746, 5337, 81, 9931, 1956, 502, 1841,
               901, 448, 3979, 3495, 7118, 7743, 2201, 2184, 8565, 9311, 1171, 9582, 2292, 7906, 7177, 5877, 374, 9539,
               3057, 2160, 6747, 8849, 6984, 8112, 1179, 3678, 5031, 7553, 4409, 358, 8136, 9479, 2149, 4105, 4482,
               2829, 2102, 1672, 976, 2666, 1315, 7179, 7680, 2645, 1638, 3029, 2865, 8825, 1678, 4918, 8523, 8603, 124,
               5123, 7683, 3602, 5140, 7018, 2688, 345, 540, 1039, 1109, 3492, 2667, 7758, 3513, 1910, 9227, 3298, 6239,
               9347, 8084, 2193, 5192, 6584, 3487, 9834, 7204, 4004, 3589, 7621, 5939, 138, 1612, 1752, 8659, 7628, 327,
               2209, 3524, 2113, 8377, 2542, 1280, 8652, 2159, 879, 5005, 5821, 8382, 6558, 8966, 846, 9897, 2832, 946,
               3884, 8379, 6503, 4340, 6522, 4465, 3204, 610, 2393, 1267, 9801, 9777, 4744, 1867, 2938, 2360, 7043,
               5228, 147, 2789, 6755, 7183, 2339, 3791, 9085, 3753, 8869, 6323, 1489, 3790, 7696, 4072, 7618, 2985,
               3350, 580, 3834, 9592, 7526, 8054, 7711, 1399, 1346, 1793, 4518, 1332, 3274, 7367, 3959, 224, 7962, 2242,
               9221, 9800, 9102, 60, 2285, 1199, 6446, 5820, 2522, 6213, 736, 5706, 4523, 9123, 6591, 3090, 4502, 8509,
               4791, 339, 4315, 2520, 6185, 3154, 8357, 9719, 2161, 3928, 5583, 6195, 1817, 2693, 888, 2175, 5956, 6278,
               5710, 3090, 2209, 3202, 2083, 9557, 1067, 6982, 8303, 7096, 334, 1341, 6179, 5828, 2024, 4074, 575, 2384,
               7522, 4193, 8832, 4168, 3341, 1114, 9712, 8016, 8137, 6416, 9927, 6404, 3643, 1892, 3463, 2056, 5915,
               667, 9834, 6907, 2101, 3456, 5449, 6484, 7018, 7436, 3050, 5143, 9134, 607, 1533, 9960, 9730, 7111, 5700,
               2158, 7854, 6520, 1515, 8913, 1624, 6090, 9860, 7351, 8831, 6341, 2754, 6215, 4413, 4927, 2133, 7388,
               513, 9392, 5300, 6649, 691, 2950, 4829, 8395, 7421, 1469, 5283, 5449, 9156, 4553, 8344, 5870, 3112, 2121,
               113, 6075, 3792, 7810, 8735, 6850, 4665, 4576, 982, 1769, 4571, 4867, 1913, 1503, 6689, 9601, 2128, 3548,
               8903, 8363, 134, 2287, 1832, 9546, 1698, 5042, 9289, 4395, 351, 8656, 9764, 3671, 3609, 2346, 1057, 6460,
               2920, 3202, 5787, 1710, 5181, 6062, 3345, 2428, 1227, 4868, 5062, 3572, 4488, 2031, 1547, 173, 6214,
               5920, 583, 2273, 7346, 5819, 7968, 6914, 2567, 5673, 8102, 2279, 5973, 1738, 1611, 6699, 5755, 255, 197,
               8314, 3540, 2408, 7000, 140, 3339, 4535, 6939, 6713, 2613, 4699, 7613, 510, 1444, 1963, 8634, 3988, 8503,
               3213, 8527, 7219, 1005, 998, 4270, 2797, 7191, 7283, 9838, 9640, 1418, 9267, 8003, 2267, 6332, 459, 7107,
               2884, 9420, 1610, 7747, 7984, 5424, 3912, 4443, 9946, 2527, 676, 4785, 291, 8444, 8949, 1146, 4387, 814,
               3245, 9418, 6648, 2859, 3337, 3082, 4952, 3619, 139, 8925, 8675, 1225, 2659, 2806, 9454, 9728, 1185,
               8031, 2928, 1249, 7832, 9418, 1718, 9061, 7030, 400, 6360, 3584, 2591, 5348, 9407, 3295, 1947, 5111,
               6336, 8645, 9911, 2827, 7120, 5637, 8838, 8870, 3105, 6635, 1250, 3219, 5027, 6659, 3087, 266, 6251, 155,
               6909, 6554, 5803, 3769, 972, 6110, 9030, 4752, 6509, 4350, 7465, 201, 1635, 8773, 7044, 991, 1844, 5174,
               7537, 3942, 1848, 5662, 5926, 3095, 863, 4921, 2407, 7379, 6803, 1837, 4117, 3270, 3876, 3854, 6095,
               1320, 2501, 2732, 4305, 5837, 2471, 873, 1901, 9858, 1470, 824, 8731, 5728, 434, 244, 9431, 1081, 2556,
               2999, 3889, 5961, 4647, 6789, 3425, 1866, 2599, 7810, 9255, 3324, 3857, 5075, 1442, 9437, 3758, 584,
               2884, 6810, 9940, 8186, 6887, 5123, 6663, 2042, 6234, 744, 9389, 7729, 6996, 5258, 1784, 662, 9878, 7254,
               6826, 1180, 8524, 8269, 3648, 9816, 3731, 5009, 6318, 6717, 5237, 4527, 4817, 246, 354, 6244, 4114, 7634,
               6668, 3852, 7245, 8753, 3972, 1108, 3208, 6834, 1340, 3348, 880, 8302, 4317, 276, 8415, 1321, 1025, 9268,
               863, 6649, 3047, 7286, 1920, 7068, 7206, 205, 7137, 2575, 4842, 8423, 3358, 1048, 5309, 8746, 9006, 424,
               3347, 9199, 1349, 1931, 5725, 4224, 3260, 3018, 2513, 1771, 2764, 203, 8478, 2752, 4237, 5240, 5560,
               7147, 2080, 7252, 595, 8441, 7612, 2836, 2937, 4046, 3451, 6659, 4582, 5002, 4578, 4759, 6064, 5491,
               3730, 8386, 4426, 2598, 141, 416, 873, 7153, 8662, 4755, 1166, 8333, 3865, 4922, 8436, 706, 4663, 3481,
               8504, 9329, 1680, 1382, 8202, 5471, 8181, 6323, 3674, 7645, 5778, 6021, 1542, 8066, 7556, 5539, 2198,
               4034, 5191, 5545, 2370, 1617, 4301, 7417, 4256, 4490, 1769, 5935, 9269, 8992, 8495, 5, 9283, 7400, 1089,
               7063, 8751, 8460, 3819, 9595, 1520, 5049, 7184, 6643, 4123, 3023, 247, 9924, 1920, 7317, 9790, 2712,
               3257, 8764, 3535, 4982, 5940, 9469, 1138, 5152, 1303, 387, 1757, 4651, 39, 8801, 4307, 8997, 3997, 6901,
               5233, 1806, 4611, 1365, 610, 9958, 893, 7605, 4296, 8987, 3015, 9023, 8164, 9250, 914, 5012, 1990, 5585,
               260, 2971, 1197, 8620, 9447, 7043, 1196, 4043, 9958, 3962, 8516, 4293, 952, 585, 1038, 1433, 9812, 7371,
               8267, 9342, 7898, 5916, 819, 206, 2259, 3073, 7128, 8245, 4610, 4795, 463, 2410, 8821, 3232, 789, 6615,
               1398, 3270, 3426, 8428, 3756, 7706, 4602, 9854, 1958, 242, 9785, 7468, 521, 4838, 6755, 607, 4385, 6223,
               5763, 9507, 1301, 3873, 1991, 405, 3187, 8595, 130, 8657, 8238, 5940, 8852, 5298, 7234, 6983, 5641, 2424,
               6538, 6699, 6439, 6094, 6118, 1119, 2725, 5324, 3642, 5787, 7967, 6881, 6564, 678, 959, 800, 4823, 7300,
               7377, 3843, 5456, 6379, 2817, 278, 4426, 2262, 632, 4327, 6571, 9006, 4352, 8187, 3639, 4486, 4160, 8269,
               5392, 9781, 9729, 3412, 1169, 3276, 1486, 878, 6335, 2066, 2757, 7182, 594, 5228, 600, 2448, 3640, 3425,
               8337, 2407, 4094, 2170, 9123, 3348, 7743, 3611, 3102, 8141};
int value = 2101;

void *sort(void *arg) {
    for (int i = 0; i < SIZE; i++) {
        for (int j = 0; j < SIZE - i - 1; j++) {
            if (a[j] > a[j + 1]) {
                int t = a[j];
                a[j] = a[j + 1];
                a[j + 1] = t;
            }
        }
    }
    printf("sorted\n");
    pthread_exit(NULL);
}

void *search(void *arg) {
    for (int i = 0; i < SIZE; i++) {
        if (a[i] == value) {
            printf("found at %d\n", i);
            pthread_exit(NULL);
        }
    }
    printf("not found in the array\n");
    pthread_exit(NULL);
}

int main() {
    // start time
    struct timespec start_time, end_time;
    clock_gettime(CLOCK_MONOTONIC, &start_time);

    // search and sort
    pthread_t thread1, thread2;
    pthread_create(&thread2, NULL, search, NULL);
    pthread_create(&thread1, NULL, sort, NULL);
    pthread_join(thread1, NULL);
    pthread_join(thread2, NULL);

    // end time
    double elapsed_time;
    clock_gettime(CLOCK_MONOTONIC, &end_time);
    elapsed_time = (end_time.tv_sec - start_time.tv_sec) + (end_time.tv_nsec - start_time.tv_nsec) / 1000000000.0;
    printf("elapsed time: %f seconds\n", elapsed_time);

    return 0;
}
